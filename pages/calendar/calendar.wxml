<view class="container">
  <!-- æ—¥å†å¤´éƒ¨ -->
  <view class="calendar-header">
    <view class="arrow" bindtap="prevMonth">â—€</view>
    <view class="current-month">{{year}}å¹´{{month}}æœˆ</view>
    <view class="arrow" bindtap="nextMonth">â–¶</view>
  </view>

  <!-- æ˜ŸæœŸæ ‡é¢˜ -->
  <view class="weekday-row">
    <view wx:for="{{dayNames}}" wx:key="*this" class="weekday">{{item}}</view>
  </view>

  <!-- æ—¥å†ç½‘æ ¼ -->
  <view class="calendar-grid">
    <view wx:for="{{days}}" wx:key="index" 
          class="day-cell {{item.isSelected ? 'selected' : ''}} {{item.hasData ? 'has-data' : ''}}"
          bindtap="selectDate" data-date="{{item.fullDate}}">
      <text class="day-num">{{item.day}}</text>
      <view class="dot-row" wx:if="{{item.hasData}}">
        <view class="dot expense" wx:if="{{item.data.expense > 0}}"></view>
        <view class="dot income" wx:if="{{item.data.income > 0}}"></view>
      </view>
    </view>
  </view>

  <!-- å½“æ—¥æ˜ç»† -->
  <view class="daily-detail">
    <view class="detail-header">
      <text class="date-label">{{selectedDate}}</text>
      <text class="empty-hint" wx:if="{{dailyTransactions.length === 0}}">æœ¬æ—¥æ— è´¦å•</text>
    </view>
    
    <scroll-view scroll-y class="transaction-list">
      <view wx:for="{{dailyTransactions}}" wx:key="_id" class="transaction-item" bindtap="onItemClick" data-id="{{item._id}}">
        <view class="item-icon">{{item.categoryIcon || 'ğŸ“¦'}}</view>
        <view class="item-left">
          <view class="category">{{item.category}}</view>
          <view class="info">
            <text class="member">{{item.memberName}}</text>
            <text class="note" wx:if="{{item.note}}">{{item.note}}</text>
          </view>
        </view>
        <view class="item-right {{item.type === 'income' ? 'plus' : 'minus'}}">
          {{item.type === 'income' ? '+' : '-'}}{{item.amount}}
        </view>
      </view>
    </scroll-view>
  </view>
</view>
