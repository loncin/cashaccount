"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getCtxData = void 0;
const _1 = require("./$");
function getCtxData(args, path) {
    if (!Array.isArray(args)) {
        throw new Error('getCtxData first args is must a array');
    }
    const target = args[args.length - 1];
    path = findKey(target, path);
    if (!args)
        return {};
    return _1.default.get(target, path, {});
}
exports.getCtxData = getCtxData;
function findKey(source, key) {
    if (source.hasOwnProperty(key)) {
        return key;
    }
    const tempArr = Object.keys(source).filter(n => typeof source[n] === 'object');
    if (tempArr.length) {
        for (const item of tempArr) {
            if (key in source[item]) {
                return `${item}.${key}`;
            }
            else {
                return `${item}.${findKey(source[item], key)}`;
            }
        }
    }
    else {
        return '';
    }
}
