"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const KEY_REG = /[^.,\s\[\]\'\"]+/g;
function get(obj, path, deflt) {
    if (null == obj)
        return arguments.length === 3 ? deflt : obj;
    let keys = JSON
        .stringify(path)
        .match(KEY_REG);
    if (!keys)
        return arguments.length === 3 ? deflt : obj;
    let ret;
    for (let i = 0, j = keys.length; i < j; i++) {
        ret = obj[keys[i]];
        if (null == ret)
            return arguments.length === 3 ? deflt : ret;
        obj = ret;
    }
    return ret;
}
function set(obj, path, value) {
    let keys = JSON
        .stringify(path)
        .match(KEY_REG);
    if (!keys)
        return obj;
    let _obj = obj;
    for (let i = 0, j = keys.length; i < j; i++) {
        let temp = _obj[keys[i]];
        if (null == temp) {
            if (i + 1 == j) {
                _obj[keys[i]] = value;
                break;
            }
            _obj[keys[i]] = /\d+/.test(keys[i])
                ? []
                : {};
        }
        else if (i + 1 == j) {
            _obj[keys[i]] = value;
        }
        _obj = _obj[keys[i]];
    }
    return obj;
}
exports.default = {
    get,
    set
};
